<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<title>(^_^)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(^_^)</title>
<link rel="stylesheet" href="../css/slide.css">
	<style>

	</style>
<script src="../js/jquery-1.11.3.min.js"></script>
<script src="../js/jquery.mousewheel.min.js"></script>
<script src="../js/ddfullscreenslider.js"></script>
</head>

<body>
<span class="stop" title="单击暂停，双击播放"></span>
<section id="dowebok" class="dd_fullscreenslider">
	<div class="slidewrapper">
		<article class="slide">
			<p>Welcome to My WebSite</p>
		</article>

		<article class="slide">
			<div class="active">HTML</div>
			<div>JavaScript</div>
			<div>CSS</div>
			<div>Less</div>
			<div>Sass</div>
			<div>jQuery</div>
			<div>PhotoShop</div>
			<div>Bottstrp</div>
			<div>Ajax</div>
			<div>Jsonp</div>
			<div>AngularJS</div>
			<span class="canvas"><canvas width="20" height="50"></canvas></span>
			<h4>个人技能</h4>
		</article>

		<article class="slide">
			<p>点歌台</p>
			<audio src="../mp3/山外小楼夜听雨.mp3" controls autoplay></audio>
			<uL class="music">
				<li class="active">山外小楼夜听雨</li>
				<li>林中鸟</li>
				<li>战放</li>
				<li>岁月飞花</li>
				<li>偏爱</li>
			</uL>

		</article>

		<article class="slide">
			<p>视频</p>
		</article>

		<article class="slide">
			<p>Thanks For Your Attention</p>
		</article>
	</div>
</section>
<script>
	function d2a(n){
		return n*Math.PI/180;
	}
	window.onload=function(){
		;(function(){
			var oSpan = document.querySelector('.slide span');
			var oC = document.querySelector('canvas');
			var aDiv = document.querySelectorAll('.slide div');
			oC.width = oSpan.offsetWidth;
			oC.height = oSpan.offsetHeight;
			var timer = null;
			var gd = oC.getContext('2d');
			var cx = oC.width/ 2,
					cy = oC.height/2;
			var n = 360;
			var lg = gd.createLinearGradient(100,350,600,350);
			lg.addColorStop(0,'orange');
			lg.addColorStop(0.2,'purple');
			lg.addColorStop(0.4,'blue');
			lg.addColorStop(0.6,'pink');
			lg.addColorStop(0.8,'red');
			lg.addColorStop(1,'aqua');
			gd.beginPath();
			gd.arc(cx,cy,200,d2a(0-90),d2a(n-90),false);
			gd.lineWidth=60;
			gd.strokeStyle='#ccc';
			gd.stroke();

			var loaded = 100;
			for(var i=0;i<aDiv.length;i++){
				var arr = [90,80,92,90,96,60,60,65,70,75,76];
				aDiv[i].index = i;
				gd.beginPath();
				gd.arc(cx,cy,200,d2a(0-90),d2a(arr[0]/100*360-90),false);
				gd.lineWidth=60;
				gd.strokeStyle=lg;
				gd.stroke();
				var str = '掌握程度'+(90).toFixed(2)+'%';
				gd.font = '30px 微软雅黑';
				gd.textAlign = 'center';
				gd.textBaseline = 'middle';
				gd.fillStyle = lg;
				gd.fillText(str,cx,cy);
				aDiv[i].onclick=function(){
					for(var i=0;i<aDiv.length;i++){
						aDiv[i].className='';
					};
					this.className='active';
					var loading = 0;
					clearInterval(timer);
					var _this = this;
					timer=setInterval(function(){
						gd.clearRect(0,0,oC.width,oC.height);
						gd.beginPath();
						gd.arc(cx,cy,200,d2a(0-90),d2a(360-90),false);
						gd.lineWidth=60;
						gd.strokeStyle='#ccc';
						gd.stroke();
						loading+=1;
						n = loading/loaded*360;
						gd.beginPath();
						gd.arc(cx,cy,200,d2a(0-90),d2a(n-90),false);
						gd.lineWidth=60;
						gd.strokeStyle=lg;
						gd.stroke();
						var scale = loading/loaded;
						var str = '掌握程度'+(scale*100).toFixed(2)+'%';
						gd.font = '30px 微软雅黑';
						gd.textAlign = 'center';
						gd.textBaseline = 'middle';
						gd.fillStyle = lg;
						gd.fillText(str,cx,cy);

						console.log(loading);
						if(loading==arr[_this.index]){
							clearInterval(timer);
						};
					},30)
				};
			};
		})();
		(function(){
			var oV = document.querySelector('audio');
			var aLi = document.querySelectorAll('.music li');
			var oStop = document.querySelector('.stop');
			oStop.onclick=function(){
				oV.pause();
				oStop.style.background='url(../image/play.jpg) no-repeat';
				oStop.style.backgroundSize= '100% 100%'
			};
			oStop.ondblclick=function(){
				oV.play();
				oStop.style.background='url(../image/stop.jpg) no-repeat';
				oStop.style.backgroundSize= '100% 100%'
			};
			for(var i=0;i<aLi.length;i++){
				aLi[i].index = i;
				aLi[i].onclick=function(){
					//alert(this.innerHTML);
					oV.src = '../mp3/'+this.innerHTML+'.mp3';
					for(var i=0;i<aLi.length;i++){
						aLi[i].className=''
					}
					this.className='active';
				}
			}
		})();
	};
</script>
<script>
var fss;
$(function() {
	fss = new ddfullscreenslider({
		sliderid: 'dowebok'
	});
});
</script>

</body>
</html>